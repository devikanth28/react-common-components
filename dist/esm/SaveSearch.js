import{_ as e,r as a}from"./Form-05721749.js";import{_ as t}from"./slicedToArray-234eb55e.js";import{_ as l}from"./createClass-2eab1421.js";import r,{useState as s}from"react";import{U as n}from"./reactstrap.modern-ecc8a633.js";import{D as o,s as i}from"./StackedImages-fef8acf7.js";import"./DateFormatsHelper-d15d1bbb.js";import{M as m}from"./Modal-725f425c.js";import{w as c}from"./WithFormHoc-55969727.js";import"./index-9df135be.js";import"./index-5b0446e7.js";import"react/jsx-runtime";import"./FloatingLabel-618fc546.js";import"./ThemeProvider-7619b1ec.js";import"./warning-64d0a8e4.js";import"./unsupportedIterableToArray-26c08a6b.js";import"./objectWithoutPropertiesLoose-87a5ea27.js";import"./setPrototypeOf-7ad06ad6.js";import"./defineProperty-475080e2.js";import"./Reference-c4580956.js";import"./usePopper-bf05a757.js";import"react-dom";import"./Transition-c4cc1300.js";import"./Typeahead-1d4401bd.js";import"./InputGroupContext-6eee73f3.js";import"./_commonjsHelpers-8b4586d6.js";import"./extends-64d70faf.js";import"./toConsumableArray-1e6b09df.js";import"./Validate-0932f172.js";import"./react-select-animated.esm-a3513bf6.js";import"./createSuper-5de7ef67.js";import"./Button-5d8691f4.js";import"./DatePicker.js";import"./style-inject.es-e87a8d02.js";import"./useWindow-4fdbb8fb.js";import"./hasClass-b4e58e9d.js";var p=["helpers","formData"],u=c((function(c){var u,d=c.helpers;c.formData;var h=l(c,p),v=s(!1),k=t(v,2),w=k[0],f=k[1],E=[];[].push(d.createOption("ReplaceExistingWorkspace","Replace existing workspace","Replace existing workspace"),d.createOption("Create new workspace","Create new workspace","Create new workspace"));var g=d.createOption("viewCheck","Make this workplace your default view","viewCheck");E.push(g);var b=null===(u=h.userSavedWorkspaceConfig)||void 0===u?void 0:u.userSavedSearches,x=[],S={htmlElementType:"FORM",id:"saveSearchForm",name:null,value:null,className:null,style:null,labelClassName:null,htmlGroups:[{htmlElementType:"ELEMENTGROUP",id:"group1",label:null,name:null,className:"row",style:null,labelClassName:null,groupElements:[{htmlElementType:"RADIO",id:"exisitingWorkSpace",className:"mb-3",attributes:{inline:""},hidden:!1,values:[{htmlElementType:"OPTION",id:"ReplaceExistingWorkspace",displayValue:"Replace existing workspace",value:"Replace existing workspace",className:"mb-2"},{htmlElementType:"OPTION",id:"Create new workspace",displayValue:"Create new workspace",value:"Create new workspace"}]},{htmlElementType:"INPUT",id:"workspaceName",label:"Workspace Name",name:"Workspace Name",className:null,autofocus:!0,style:null,helperText:"Your workspace can have any name you like.",labelClassName:null,type:"text",maxLength:45,placeholder:null},{htmlElementType:"DATALIST",id:"savedWorkspace",label:"Select Saved Workspace",name:"savedWorkspace",value:null,onInputChangeEnable:!1,className:" form-control",dataListClassName:"custom-datagrid col-12",labelClassName:"col-12",required:!0,values:[]},{htmlElementType:"CHECKBOX",id:"viewCheckbox",autofocus:!0,className:"my-3",style:null,labelClassName:null,placeholder:null,hidden:!0,values:E}]},{htmlElementType:"ELEMENTGROUP",id:"group2",label:null,name:null,className:"text-center border-top mx-n3 mt-3",style:null,labelClassName:null,groupElements:[{htmlElementType:"BUTTON",id:"clear",label:"Clear",name:null,value:null,className:"rounded-1  px-3 brand-secondary btn mt-3 me-3",variant:"",style:null,labelClassName:null,reset:!0},{htmlElementType:"BUTTON",id:"saveSearch",label:"Save & apply",name:null,value:null,variant:"",className:"px-3 btn btn-brand rounded-1 mt-3",style:null,labelClassName:null,submit:!0}]}],notes:null,submitDisabled:!0},y=function(){var t=e(a.mark((function e(t){var l,r,s,n,o,m;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t[0].preventDefault(),(s=d.validateAndCollectValuesForSubmit("saveSearchForm",!1,!1,!1))&&s.length>0?d.enableElement("saveSearch"):d.disableElement("saveSearch"),n=(null==s?void 0:s.exisitingWorkSpace)&&"Replace existing workspace"==s.exisitingWorkSpace&&b&&b.findIndex((function(e){return e.title==s.savedWorkspace})),o=null!==(l=null==b||null===(r=b[n])||void 0===r?void 0:r.title)&&void 0!==l?l:null==s?void 0:s.workspaceName,e.next=7,i(h.saveUserSearchConfig.method,h.saveUserSearchConfig.url,{url:window.location.href,workspaceName:o,isUpdate:n>=0&&"Replace existing workspace"==(null==s?void 0:s.exisitingWorkSpace)});case 7:"SUCCESS"===(m=e.sent).data.statusCode?T():d.enableElement("saveSearch"),h.setSaveWorkspaceResponse(m);case 10:case"end":return e.stop()}}),e)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=e(a.mark((function e(t){var l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.length>0||t&&"Replace existing workspace"==(null===(l=t[1])||void 0===l?void 0:l.value)?(d.showElement("savedWorkspace"),d.hideElement("workspaceName")):(d.showElement("workspaceName"),d.hideElement("savedWorkspace")),d.resetForm("savedWorkspace"),d.resetForm("workspaceName"),d.disableElement("saveSearch");case 4:case"end":return e.stop()}}),e)})));return function(e){return t.apply(this,arguments)}}(),N=function(e){e&&e[1]&&e[1].value&&e[1].value[0]?d.enableElement("saveSearch"):d.disableElement("saveSearch")},C={saveSearchForm:[["load",function(){b&&b.length>0?(d.showElement("exisitingWorkSpace"),d.updateValue("Replace existing workspace","exisitingWorkSpace")):d.hideElement("exisitingWorkSpace"),0==(null==x?void 0:x.length)&&(null==b||b.map((function(e){x.push(d.createOption(e.title,e.title,e.title))})),d.addOptions("savedWorkspace",x,!0)),j()}],["submit",y]],exisitingWorkSpace:[["change",j]],saveSearch:[["click",y]],savedWorkspace:[["select",N]],workspaceName:[["change",N]]},T=function(){d.resetForm("saveSearchForm"),f(!1)};return r.createElement(r.Fragment,null,r.createElement("button",{onClick:function(){return f(!0)},className:"btn btn-link p-1 icon-hover",id:"saveWorkSpace"},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16"},r.createElement("g",{id:"save-icn-16",transform:"translate(-101 -120)"},r.createElement("rect",{id:"Rectangle_10427","data-name":"Rectangle 10427",width:"16",height:"16",rx:"3",transform:"translate(101 120)",fill:"none"}),r.createElement("g",{id:"save-icn",transform:"translate(93.625 116.143)"},r.createElement("path",{id:"Path_50534","data-name":"Path 50534",d:"M9.375,6.87v9.674a1.664,1.664,0,0,0,1.663,1.663H19.5a1.664,1.664,0,0,0,1.663-1.663V9.107A1.662,1.662,0,0,0,20.8,8.068l-1.79-2.237a1.658,1.658,0,0,0-1.3-.624H11.038A1.664,1.664,0,0,0,9.375,6.87Zm.907,0a.757.757,0,0,1,.756-.756h.756v1.36a1.059,1.059,0,0,0,1.058,1.058h3.628a1.059,1.059,0,0,0,1.058-1.058V6.114h.175a.752.752,0,0,1,.59.284l1.791,2.237h0a.764.764,0,0,1,.165.472v7.437a.757.757,0,0,1-.756.756H11.038a.757.757,0,0,1-.756-.756Z"}),r.createElement("path",{id:"Path_50535","data-name":"Path 50535",d:"M33.079,48.452a2.876,2.876,0,1,0-2.03-.842,2.873,2.873,0,0,0,2.03.842Zm0-4.837h0a1.965,1.965,0,1,1-1.965,1.965,1.966,1.966,0,0,1,1.965-1.965Z",transform:"translate(-17.809 -32.058)"})))),r.createElement(n,{placement:"bottom",target:"saveWorkSpace"},"Save Workspace")),w&&r.createElement(m,{show:w,onHide:function(){return T()},backdrop:"static","aria-labelledby":"contained-modal-title-vcenter",centered:!0},"   ",r.createElement(m.Header,{closeButton:!0},r.createElement(m.Title,{className:"h6"},"Save filters as new workspace")),r.createElement(m.Body,null,r.createElement(o,{formJson:S,helpers:d,observers:C}))))}));export{u as default};
//# sourceMappingURL=SaveSearch.js.map
