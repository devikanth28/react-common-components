import{_ as e}from"./toConsumableArray-1e6b09df.js";import{_ as n}from"./slicedToArray-234eb55e.js";import*as t from"react";import a,{useState as r,useEffect as s}from"react";import{D as o}from"./Dropdown-395ed087.js";import{c as i}from"./index-9df135be.js";import{u as l}from"./ThemeProvider-7619b1ec.js";import{jsx as c}from"react/jsx-runtime";const m=t.forwardRef((({bsPrefix:e,size:n,vertical:t=!1,className:a,role:r="group",as:s="div",...o},m)=>{const d=l(e,"btn-group");let v=d;return t&&(v=`${d}-vertical`),c(s,{...o,ref:m,role:r,className:i(a,v,n&&`${d}-${n}`)})}));m.displayName="ButtonGroup";var d=m,v=function(t){var i=r("ws://localhost:59557/connect"),l=n(i,2),c=l[0],m=l[1],v=r([]),h=n(v,2),p=h[0],u=h[1],f=r(!1),g=n(f,2),Z=g[0],w=g[1],E=r(null),y=n(E,2),S=y[0],R=y[1],T=r(!1),b=n(T,2),_=b[0],O=b[1],j=r(!1),x=n(j,2),A=x[0],N=x[1],P=r(!1),U=n(P,2),D=U[0],L=U[1],M=r("yes"),k=n(M,2),B=k[0],C=k[1],F=r(t.buttonName),H=n(F,2),V=H[0],I=H[1],$=r(!1),J=n($,2),W=J[0],z=J[1],G=1;s((function(){t.webSocketUrl&&m(t.webSocketUrl),t.duplex&&C(t.duplex);var e=new WebSocket(c);if(R(e),t.autoScanInit){var n={printType:"scan",action:"init"};e.onopen=function(){e.send(JSON.stringify(n))},e.onmessage=function(e){"string"==typeof e.data&&t.onErrorResponse(Z)}}}),[D]),s((function(){t.disableScanOption?z(!0):z(!1)}),[t.disableScanOption]),s((function(){(t.uploaded||t.triggerResponse||t.resetAddedDocuments)&&u([])}),[t.uploaded,t.triggerResponse,t.resetAddedDocuments]);var q=function(n){t.setHideProgressBar(!1),t.isAppendAllowed||t.setScannedFiles([]),t.isAppendAllowed&&t.setPreviousScannedFilesCount(p.length),z(!0),t.setScannedFilesCount(0),t.onLoadingResponse(!0),u([]),C(n),w(null),O(!1),N(!1);var a={printType:"scan",action:"add",duplex:n,fileType:t.scannerOutputType?t.scannerOutputType:"pdf",endTag:"END"};S.readyState===WebSocket.OPEN?S.send(JSON.stringify(a)):L(!0),S.onmessage=function(n){if(n.data instanceof Blob){var t="scanned_document_"+G+K();G++;var a=new File([n.data],t,{type:Q()});u((function(n){return[].concat(e(n),[a])}))}else"string"==typeof n.data&&("END"===n.data?O(!0):(w(n.data),N(!0)))}},K=function(){switch(t.scannerOutputType){case"pdf":default:return".pdf";case"png":return".png";case"jpeg":return".jpeg"}},Q=function(){switch(t.scannerOutputType){case"pdf":default:return"application/pdf";case"png":return"image/png";case"jpeg":return"image/jpeg"}};return s((function(){if(_){t.setScannedFilesCount(p.length);var e=500;p.forEach((function(n){return setTimeout((function(){t.onSuccessResponse(n)}),e),e+=500,function(){clearTimeout(timer)}})),t.isAppendAllowed||I("Rescan"),t.onLoadingResponse(!1),z(!1)}A&&(t.onErrorResponse(Z),t.onLoadingResponse(!1),z(!1))}),[_,A]),a.createElement(a.Fragment,null,a.createElement(o,{as:d},a.createElement(o.Toggle,{variant:t.variant,id:"dropdown-basic",disabled:W},"no"==B&&a.createElement("svg",{className:"me-2",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.createElement("g",{id:"scan-oneside-icn-16",transform:"translate(-681 -185)"},a.createElement("g",{id:"scan-oneside-icn-16-2","data-name":"scan-oneside-icn-16",transform:"translate(682.9 186)"},a.createElement("path",{id:"Union_175","data-name":"Union 175",d:"M1275.291-8121.914v-.811h.661a.359.359,0,0,0,.359-.357v-.664h.811v.664a1.171,1.171,0,0,1-1.17,1.168Zm-1.531,0v-.811h1.321v.811Zm-1.531,0v-.811h1.321v.811Zm-1.533,0v-.811h1.321v.811Zm-1.531,0v-.811h1.321v.811Zm-.872,0a1.174,1.174,0,0,1-1.17-1.176v-.656h.811v.662a.36.36,0,0,0,.361.359h.66v.811Zm8.021-2.044v-1.319h.811v1.319Zm-9.19,0v-1.319h.811v1.319Zm9.19-1.531v-1.321h.811v1.321Zm-9.19,0v-1.321h.811v1.321Zm10.211-.51v-1.021h-10.422V-8126h-.811v-2.853h.811v1.021h10.422v-1.021h.811V-8126Zm-1.021-2.042v-3.573h-1.893a1.174,1.174,0,0,1-1.17-1.176v-2.4h-4.958a.362.362,0,0,0-.359.357v6.792h-.811v-6.785a1.174,1.174,0,0,1,1.172-1.174h5.685l3.145,3.669v4.29Zm-2.252-4.75a.362.362,0,0,0,.359.363h1.564l-1.923-2.25Z",transform:"translate(-1266 8135.85)",fill:"#080808"}),a.createElement("path",{id:"Union_177","data-name":"Union 177",d:"M1266.2-8131.094v-.751h1.013v-3.067l-.711.445-.4-.667,1.368-.866h.58v4.155h1.013v.751Z",transform:"translate(-1262.622 8137.505)",fill:"#080808"})),a.createElement("rect",{id:"Rectangle_12084","data-name":"Rectangle 12084",width:"16",height:"16",transform:"translate(681 185)",fill:"none"}))),"yes"==B&&a.createElement("svg",{className:"me-2",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.createElement("g",{id:"scan-oneside-icn-16",transform:"translate(-681 -185)"},a.createElement("g",{id:"scan-oneside-icn-16-2","data-name":"scan-oneside-icn-16",transform:"translate(682.9 186)"},a.createElement("path",{id:"Union_176","data-name":"Union 176",d:"M1251.291-8121.914v-.811h.661a.359.359,0,0,0,.359-.357v-.664h.811v.664a1.171,1.171,0,0,1-1.17,1.168Zm-1.531,0v-.811h1.321v.811Zm-1.531,0v-.811h1.321v.811Zm-1.533,0v-.811h1.323v.811Zm-1.531,0v-.811h1.321v.811Zm-.872,0a1.174,1.174,0,0,1-1.17-1.176v-.656h.811v.662a.36.36,0,0,0,.361.359h.66v.811Zm8.02-2.044v-1.319h.811v1.319Zm-9.19,0v-1.319h.811v1.319Zm9.19-1.531v-1.321h.811v1.321Zm-9.19,0v-1.321h.811v1.321Zm10.211-.51v-1.021h-10.422V-8126h-.811v-2.853h.811v1.021h10.422v-1.021h.811V-8126Zm-1.021-2.042v-3.573h-1.893a1.174,1.174,0,0,1-1.17-1.176v-2.4h-4.958a.362.362,0,0,0-.359.357v6.792h-.811v-6.785a1.175,1.175,0,0,1,1.172-1.174h5.685l3.145,3.669v4.29Zm-2.252-4.75a.362.362,0,0,0,.359.363h1.564l-1.923-2.25Z",transform:"translate(-1242 8135.85)",fill:"#080808"}),a.createElement("path",{id:"Path_50631","data-name":"Path 50631",d:"M3.982-5.818v.446H1.047v-.4l1.6-1.759a3.167,3.167,0,0,0,.469-.65,1.272,1.272,0,0,0,.145-.579.739.739,0,0,0-.22-.575.888.888,0,0,0-.621-.2,2.02,2.02,0,0,0-1.293.524l-.2-.407a1.961,1.961,0,0,1,.682-.411,2.36,2.36,0,0,1,.824-.152,1.444,1.444,0,0,1,.992.323,1.107,1.107,0,0,1,.365.873,1.7,1.7,0,0,1-.178.756,3.623,3.623,0,0,1-.585.808l-1.293,1.4Z",transform:"translate(2.176 11.637)",fill:"#080808"}),a.createElement("path",{id:"Path_50631_-_Outline","data-name":"Path 50631 - Outline",d:"M4.132-5.222H.9v-.609l1.636-1.8a3.034,3.034,0,0,0,.446-.617,1.129,1.129,0,0,0,.129-.511.592.592,0,0,0-.171-.465.75.75,0,0,0-.52-.161,1.885,1.885,0,0,0-1.2.489l-.146.121L.741-9.452l.08-.076a2.118,2.118,0,0,1,.734-.443,2.521,2.521,0,0,1,.876-.161,1.6,1.6,0,0,1,1.092.361,1.255,1.255,0,0,1,.416.985,1.852,1.852,0,0,1-.193.823,3.785,3.785,0,0,1-.609.843L2.074-5.968H4.132ZM1.2-5.522H3.832v-.146H1.39L2.915-7.323A3.494,3.494,0,0,0,3.476-8.1a1.554,1.554,0,0,0,.162-.69.955.955,0,0,0-.315-.761,1.307,1.307,0,0,0-.893-.286,2.222,2.222,0,0,0-.772.143,1.9,1.9,0,0,0-.549.306l.069.139a2.09,2.09,0,0,1,1.24-.442,1.036,1.036,0,0,1,.722.24.886.886,0,0,1,.269.686,1.426,1.426,0,0,1-.162.646,3.327,3.327,0,0,1-.491.682L1.2-5.715Z",transform:"translate(2.176 11.637)",fill:"#080808"})),a.createElement("rect",{id:"Rectangle_12084","data-name":"Rectangle 12084",width:"16",height:"16",transform:"translate(681 185)",fill:"none"}))),V),a.createElement(o.Menu,null,a.createElement(o.Item,{onClick:function(){return q("no")}},"One side scan"),a.createElement(o.Item,{onClick:function(){return q("yes")}},"Two side scan"))))};export{d as B,v as D};
//# sourceMappingURL=DocumentScan-a95cec11.js.map
